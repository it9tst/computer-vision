<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Zen API: Reference Counting</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="extra-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <!-- <td id="projectlogo"><img alt="Logo" src="logo.png"/></td> -->
  <td style="padding-left: 0.5em;">
   <div id="projectname">Zen API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>Topics</span></a></li>
      <li><a href="modules.html"><span>Types</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('k_api-_reference-_counting.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Reference Counting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>All classes derived from <a class="el" href="classk_object.html" title="Root of all Zen classes. ">kObject</a> are reference counted. Reference counting can be used to share read-only or thread-safe object instances within different areas of a program.</p>
<p>Initially, the reference count of each object is set to one. The <a class="el" href="classk_object_a0becbd509637601cabb99354f0d8360e.html#a0becbd509637601cabb99354f0d8360e">kObject_Share</a> method can be used to increase the reference count, and the <a class="el" href="classk_object_a72246f409dd8a45063297b93937fdce7.html#a72246f409dd8a45063297b93937fdce7">kObject_IsShared</a> method can be used to determine if the reference count is currently greater than one. When an object is destroyed (or disposed), the reference count is decremented. The resources associated with an object are deallocated only when the reference count reaches zero.</p>
<div class="fragment"><div class="line"><a class="code" href="classk_array2.html">kArray2</a> array = <a class="code" href="k_api_def_8h.html#a84fffd7983bd5432e891d53c4bdea1d1">kNULL</a>; </div>
<div class="line"></div>
<div class="line"><span class="comment">//construct a two-dimensional array (ref count: 1)</span></div>
<div class="line"><a class="code" href="k_api_def_8h_a1fbf6e6f10e80263bb9e081a13a98624.html#a1fbf6e6f10e80263bb9e081a13a98624">kCheck</a>(<a class="code" href="classk_array2_a5ac7d8592ed02ecdacc34fb301ca3f01.html#a5ac7d8592ed02ecdacc34fb301ca3f01">kArray2_Construct</a>(&amp;array, <a class="code" href="k_api_def_8h_ad287f5a265ccaf8067dd1f3d8bdcdc53.html#ad287f5a265ccaf8067dd1f3d8bdcdc53">kTypeOf</a>(<a class="code" href="structk64f.html">k64f</a>), 100, 200, <a class="code" href="k_api_def_8h.html#a84fffd7983bd5432e891d53c4bdea1d1">kNULL</a>)); </div>
<div class="line"></div>
<div class="line"><span class="comment">//increment the array&#39;s reference count (ref count: 2)</span></div>
<div class="line"><a class="code" href="k_api_def_8h_a1fbf6e6f10e80263bb9e081a13a98624.html#a1fbf6e6f10e80263bb9e081a13a98624">kCheck</a>(<a class="code" href="classk_object_a0becbd509637601cabb99354f0d8360e.html#a0becbd509637601cabb99354f0d8360e">kObject_Share</a>(array)); </div>
<div class="line"></div>
<div class="line"><span class="comment">//the first time that the array is destroyed, its reference count will be decremented,</span></div>
<div class="line"><span class="comment">//but the array itself will not be deallocated (ref count: 1)</span></div>
<div class="line"><a class="code" href="k_api_def_8h_a1fbf6e6f10e80263bb9e081a13a98624.html#a1fbf6e6f10e80263bb9e081a13a98624">kCheck</a>(<a class="code" href="classk_object_a0301dff8b1c53d86b6227fdb5dc077d3.html#a0301dff8b1c53d86b6227fdb5dc077d3">kObject_Destroy</a>(array)); </div>
<div class="line"></div>
<div class="line"><span class="comment">//the second time that the array is destroyed, its reference count will reach zero, </span></div>
<div class="line"><span class="comment">//and the array will be deallocated (ref count: 0)</span></div>
<div class="line"><a class="code" href="k_api_def_8h_a1fbf6e6f10e80263bb9e081a13a98624.html#a1fbf6e6f10e80263bb9e081a13a98624">kCheck</a>(<a class="code" href="classk_object_a0301dff8b1c53d86b6227fdb5dc077d3.html#a0301dff8b1c53d86b6227fdb5dc077d3">kObject_Destroy</a>(array)); </div>
</div><!-- fragment --><p><a class="el" href="classk_object.html" title="Root of all Zen classes. ">kObject</a>'s reference count is implemented using a 32-bit atomic integer (<a class="el" href="structk_atomic32s.html" title="Represents a 32-bit, atomically-accessed, signed integer. ">kAtomic32s</a>). The use of an atomic variable enables reference counting methods to be used safely and efficiently across multiple threads.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classk_object_a0becbd509637601cabb99354f0d8360e.html#a0becbd509637601cabb99354f0d8360e" title="Increments the reference count associated with this object. ">kObject_Share</a>, <a class="el" href="classk_object_a72246f409dd8a45063297b93937fdce7.html#a72246f409dd8a45063297b93937fdce7" title="Reports whether the object is currently shared (reference count greater than one). ">kObject_IsShared</a>, <a class="el" href="classk_object_a0301dff8b1c53d86b6227fdb5dc077d3.html#a0301dff8b1c53d86b6227fdb5dc077d3" title="Destroys the object. ">kObject_Destroy</a>, <a class="el" href="classk_object_a6f4c8a9776612a2cd780bf4873427322.html#a6f4c8a9776612a2cd780bf4873427322" title="Destroys the object and any aggregated child elements. ">kObject_Dispose</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="help.html">Topics</a></li>
    <li class="footer">This site is best viewed with Firefox. Copyright (C) 2003-2016 by LMI Technologies.</li>
  </ul>
</div>
</body>
</html>
